From: Andrea Zagli <azagli@libero.it>
Date: Wed, 1 Mar 2017 20:01:43 +0100
Subject: Glib old version private.

---
 src/form.c                 |  8 ++++----
 src/formelement.c          | 18 +++++++++---------
 src/formelementfilter.c    |  8 +++++---
 src/formelementvalidator.c |  4 ++--
 src/formvalidator.c        |  4 ++--
 5 files changed, 22 insertions(+), 20 deletions(-)

diff --git a/src/form.c b/src/form.c
index ed889e8..b5917b4 100644
--- a/src/form.c
+++ b/src/form.c
@@ -351,7 +351,7 @@ ZakFormElement
 GPtrArray
 *zak_form_form_get_elements (ZakFormForm *zakform)
 {
-	ZakFormFormPrivate *priv = zak_form_form_get_instance_private (zakform);
+	ZakFormFormPrivate *priv = ZAK_FORM_FORM_GET_PRIVATE (zakform);
 
 	return priv->ar_elements;
 }
@@ -371,7 +371,7 @@ GPtrArray
 
 	guint i;
 
-	ZakFormFormPrivate *priv = zak_form_form_get_instance_private (zakform);
+	ZakFormFormPrivate *priv = ZAK_FORM_FORM_GET_PRIVATE (zakform);
 
 	ar = g_ptr_array_new ();
 	for (i = 0; i < priv->ar_elements->len; i++)
@@ -447,7 +447,7 @@ ZakFormValidator
 GPtrArray
 *zak_form_form_get_validators (ZakFormForm *zakform)
 {
-	ZakFormFormPrivate *priv = zak_form_form_get_instance_private (zakform);
+	ZakFormFormPrivate *priv = ZAK_FORM_FORM_GET_PRIVATE (zakform);
 
 	return priv->ar_validators;
 }
@@ -467,7 +467,7 @@ GPtrArray
 
 	guint i;
 
-	ZakFormFormPrivate *priv = zak_form_form_get_instance_private (zakform);
+	ZakFormFormPrivate *priv = ZAK_FORM_FORM_GET_PRIVATE (zakform);
 
 	ar = g_ptr_array_new ();
 	for (i = 0; i < priv->ar_validators->len; i++)
diff --git a/src/formelement.c b/src/formelement.c
index 240fd73..79efe25 100644
--- a/src/formelement.c
+++ b/src/formelement.c
@@ -267,7 +267,7 @@ zak_form_element_add_extension (ZakFormElement *element, ZakFormElementExtension
 GPtrArray
 *zak_form_element_get_extensions (ZakFormElement *element)
 {
-	ZakFormElementPrivate *priv = zak_form_element_get_instance_private (element);
+	ZakFormElementPrivate *priv = ZAK_FORM_ELEMENT_GET_PRIVATE (element);
 
 	return priv->pa_extensions;
 }
@@ -287,7 +287,7 @@ GPtrArray
 
 	guint i;
 
-	ZakFormElementPrivate *priv = zak_form_element_get_instance_private (element);
+	ZakFormElementPrivate *priv = ZAK_FORM_ELEMENT_GET_PRIVATE (element);
 
 	ar = g_ptr_array_new ();
 	for (i = 0; i < priv->pa_extensions->len; i++)
@@ -313,7 +313,7 @@ zak_form_element_add_filter (ZakFormElement *element, ZakFormElementFilter *filt
 {
 	ZakFormElementPrivate *priv;
 
-	priv = zak_form_element_get_instance_private (element);
+	priv = ZAK_FORM_ELEMENT_GET_PRIVATE (element);
 
 	g_ptr_array_add (priv->pa_filters, filter);
 }
@@ -330,7 +330,7 @@ zak_form_element_filter (ZakFormElement *element)
 
 	ZakFormElementPrivate *priv;
 
-	priv = zak_form_element_get_instance_private (element);
+	priv = ZAK_FORM_ELEMENT_GET_PRIVATE (element);
 
 	for (i = 0; i < priv->pa_filters->len; i++)
 		{
@@ -354,7 +354,7 @@ zak_form_element_filter (ZakFormElement *element)
 GPtrArray
 *zak_form_element_get_filters (ZakFormElement *element)
 {
-	ZakFormElementPrivate *priv = zak_form_element_get_instance_private (element);
+	ZakFormElementPrivate *priv = ZAK_FORM_ELEMENT_GET_PRIVATE (element);
 
 	return priv->pa_filters;
 }
@@ -403,7 +403,7 @@ GPtrArray
 
 	guint i;
 
-	ZakFormElementPrivate *priv = zak_form_element_get_instance_private (element);
+	ZakFormElementPrivate *priv = ZAK_FORM_ELEMENT_GET_PRIVATE (element);
 
 	ar = g_ptr_array_new ();
 	for (i = 0; i < priv->pa_filters->len; i++)
@@ -1286,7 +1286,7 @@ zak_form_element_add_validator (ZakFormElement *element, ZakFormElementValidator
 {
 	ZakFormElementPrivate *priv;
 
-	priv = zak_form_element_get_instance_private (element);
+	priv = ZAK_FORM_ELEMENT_GET_PRIVATE (element);
 
 	g_ptr_array_add (priv->pa_validators, validator);
 }
@@ -1412,7 +1412,7 @@ GPtrArray
 GPtrArray
 *zak_form_element_get_validators(ZakFormElement *element)
 {
-	ZakFormElementPrivate *priv = zak_form_element_get_instance_private (element);
+	ZakFormElementPrivate *priv = ZAK_FORM_ELEMENT_GET_PRIVATE (element);
 
 	return priv->pa_validators;
 }
@@ -1432,7 +1432,7 @@ GPtrArray
 
 	guint i;
 
-	ZakFormElementPrivate *priv = zak_form_element_get_instance_private (element);
+	ZakFormElementPrivate *priv = ZAK_FORM_ELEMENT_GET_PRIVATE (element);
 
 	ar = g_ptr_array_new ();
 	for (i = 0; i < priv->pa_validators->len; i++)
diff --git a/src/formelementfilter.c b/src/formelementfilter.c
index 07dc347..1bb9652 100644
--- a/src/formelementfilter.c
+++ b/src/formelementfilter.c
@@ -52,7 +52,7 @@ typedef struct
 		gboolean enabled;
 	} ZakFormElementFilterPrivate;
 
-G_DEFINE_ABSTRACT_TYPE_WITH_PRIVATE (ZakFormElementFilter, zak_form_element_filter, G_TYPE_OBJECT)
+G_DEFINE_ABSTRACT_TYPE (ZakFormElementFilter, zak_form_element_filter, G_TYPE_OBJECT)
 
 static void
 zak_form_element_filter_class_init (ZakFormElementFilterClass *class)
@@ -77,6 +77,8 @@ zak_form_element_filter_class_init (ZakFormElementFilterClass *class)
 	                                                       "Enabled",
 	                                                       TRUE,
 	                                                       G_PARAM_READWRITE | G_PARAM_CONSTRUCT));
+
+	g_type_class_add_private (object_class, sizeof (ZakFormElementFilterPrivate));
 }
 
 static void
@@ -178,7 +180,7 @@ gchar
 gboolean
 zak_form_element_filter_get_enabled (ZakFormElementFilter *filter)
 {
-	ZakFormElementFilterPrivate *priv = zak_form_element_filter_get_instance_private (filter);
+	ZakFormElementFilterPrivate *priv = ZAK_FORM_ELEMENT_FILTER_GET_PRIVATE (filter);
 
 	return priv->enabled;
 }
@@ -192,7 +194,7 @@ zak_form_element_filter_get_enabled (ZakFormElementFilter *filter)
 void
 zak_form_element_filter_set_enabled (ZakFormElementFilter *filter, gboolean enabled)
 {
-	ZakFormElementFilterPrivate *priv = zak_form_element_filter_get_instance_private (filter);
+	ZakFormElementFilterPrivate *priv = ZAK_FORM_ELEMENT_FILTER_GET_PRIVATE (filter);
 
 	priv->enabled = enabled;
 }
diff --git a/src/formelementvalidator.c b/src/formelementvalidator.c
index 0db180c..d75db60 100644
--- a/src/formelementvalidator.c
+++ b/src/formelementvalidator.c
@@ -227,7 +227,7 @@ gchar
 gboolean
 zak_form_element_validator_get_enabled (ZakFormElementValidator *validator)
 {
-	ZakFormElementValidatorPrivate *priv = zak_form_element_validator_get_instance_private (validator);
+	ZakFormElementValidatorPrivate *priv = ZAK_FORM_ELEMENT_VALIDATOR_GET_PRIVATE (validator);
 
 	return priv->enabled;
 }
@@ -241,7 +241,7 @@ zak_form_element_validator_get_enabled (ZakFormElementValidator *validator)
 void
 zak_form_element_validator_set_enabled (ZakFormElementValidator *validator, gboolean enabled)
 {
-	ZakFormElementValidatorPrivate *priv = zak_form_element_validator_get_instance_private (validator);
+	ZakFormElementValidatorPrivate *priv = ZAK_FORM_ELEMENT_VALIDATOR_GET_PRIVATE (validator);
 
 	priv->enabled = enabled;
 }
diff --git a/src/formvalidator.c b/src/formvalidator.c
index df5cc82..6c95360 100644
--- a/src/formvalidator.c
+++ b/src/formvalidator.c
@@ -238,7 +238,7 @@ gchar
 gboolean
 zak_form_validator_get_enabled (ZakFormValidator *validator)
 {
-	ZakFormValidatorPrivate *priv = zak_form_validator_get_instance_private (validator);
+	ZakFormValidatorPrivate *priv = ZAK_FORM_VALIDATOR_GET_PRIVATE (validator);
 
 	return priv->enabled;
 }
@@ -252,7 +252,7 @@ zak_form_validator_get_enabled (ZakFormValidator *validator)
 void
 zak_form_validator_set_enabled (ZakFormValidator *validator, gboolean enabled)
 {
-	ZakFormValidatorPrivate *priv = zak_form_validator_get_instance_private (validator);
+	ZakFormValidatorPrivate *priv = ZAK_FORM_VALIDATOR_GET_PRIVATE (validator);
 
 	priv->enabled = enabled;
 }
